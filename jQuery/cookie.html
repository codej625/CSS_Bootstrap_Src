<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
    <title>cookie</title>
</head>

<body>
    <label for="cookie_save">쿠키 저장</label>
    <input type="text" id="cookie_save">
    <input type="button" value="쿠키저장" id="save_btn"><br>
    <div id="list"></div>
    <input type="button" value="쿠키불러오기" id="load_btn">
</body>

<script>
    // $(document).ready(function (){}); == $(function (){});
    $(function () {
        // 전역 변수 i 선언
        let i;
        const cookieChk = $.cookie();
        cookieChk.toString();
        if(cookieChk ===  '{}'){
            let i = 0;
            alert('비었다');
        }else{
            alert('안비었다');
        }

        let jsonStr = JSON.stringify($.cookie());
        // {, }를 자르기위해 slice 내장함수 사용 
        let jsonSplit = jsonStr.slice(1, -1);
        // ,를 기준으로 split
        let jsonArr = jsonSplit.split(",");

        addList(jsonArr);
        // #save_btn click
        $('#save_btn').click(function () {
            let cookieVal = $('#cookie_save').val();
            if (cookieVal) {
                // cookie는 key:value로 저장, json 방식으로 return
                $.cookie(i, cookieVal);
                // input value의 값을 지움
                $('#cookie_save').val('');
                alert('쿠키 키값->' + i + '\n 저장 완료');
                i++;
            }
            // 모든 쿠키값을 가져와 json 문자열로 변환
        });
        function addList(jsonArr) {
            for (let i = 0; i < jsonArr.length; i++) {
                let cookieVal = jsonArr[i];
                let value = cookieVal.substr(1, 1);
                let html = '<div>' + cookieVal + '<button id="update_btn">수정</button><button id="delete_btn" onclick="delete_btn(' + value + ');">삭제</button></div>';
                $('#list').append(html);
            }
        }
    });

    // #deleteBtn click
    function deleteBtn(value) {
    };
    /*
    ex)
    $.cookie('key값','value',{
                                expires : 10
                                ,domain : 'www.naver.com'
                                ,secure : false
                            });
    */
    /*
        expires : 쿠키를 저장하는 기간 (10이면 10일동안 쿠키정보를 저장)
        path    : 쿠키경로 설정
        domain  : 쿠키를 저장할 도메인 (defalut -> 지정안할시 호출한 url의 domain이 됨)
        secure  : https url에 사용을 하고자 한다면 true 
    */
</script>

</body>

</html>